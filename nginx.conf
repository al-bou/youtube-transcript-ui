# Types MIME de base
types {
    text/html                             html htm shtml;
    text/css                              css;
    text/xml                              xml;
    image/gif                             gif;
    image/jpeg                            jpeg jpg;
    application/javascript                js;
    application/atom+xml                  atom;
    application/rss+xml                   rss;
    font/woff                             woff;
    font/woff2                            woff2;
    application/vnd.ms-fontobject         eot;
    application/x-font-ttf                ttc ttf;
    image/svg+xml                         svg svgz;
    image/x-icon                          ico;
    image/x-ms-bmp                        bmp;
    text/plain                            txt;
    text/x-component                      htc;
    text/mathml                           mml;
    text/vnd.sun.j2me.app-descriptor      jad;
    text/vnd.wap.wml                      wml;
    text/x-component                      htc;
    application/json                      json;
    application/x-web-app-manifest+json   webapp;
    application/xhtml+xml                 xhtml;
    application/xml                       rss xml;
    application/zip                       zip;
    application/x-rar-compressed          rar;
}

server {
    listen 80;
    server_name _;
    root /usr/share/nginx/html;
    index index.html;

    # En-têtes de sécurité
    add_header X-Frame-Options "SAMEORIGIN";
    add_header X-Content-Type-Options "nosniff";
    add_header X-XSS-Protection "1; mode=block";
    add_header Referrer-Policy "strict-origin";

    # Logs
    access_log /dev/stdout;
    error_log /dev/stderr;

    # Gestion des fichiers statiques
    location / {
        try_files $uri $uri/ /index.html;
    }

    # Gestion des erreurs
    error_page 404 /index.html;
    error_page 500 502 503 504 /50x.html;
    location = /50x.html {
        root /usr/share/nginx/html;
    }

    # Désactiver l'accès aux fichiers cachés
    location ~ /\. {
        deny all;
        access_log off;
        log_not_found off;
    }
}